<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Exam.js</title>
</head>
<link rel="stylesheet" type="text/css" href="css/style.css">
<link rel="stylesheet" type="text/css" href="css/exam.css">
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=AM_HTMLorMML"></script>

<body>
  <div class="top-panel">Exam.js</div>
  <br>
  <br>
  <br>
  <div class="button" id="finishBtn">Finish</div>
  <div class="answers-box">
    <div class="counter" id="answers">Answers: 0</div>
    <div class="counter" id="tests">Tests: 0</div>
    <div id="error-box" style="color: #FF4C4C"></div>
  </div>
  <div class="box">
    <div class="result result-box">
      <textarea id="editor" class="text-pane"></textarea>
      <div id="result" class="text-pane"></div>
    </div>
    <div> {{sum_(i=1)^n i^3=((n(n+1))/2)^2}}</div>
  </div>
  <script type="text/javascript" src="dist/exam.js"></script>
  <script type="text/javascript">
  var resultDiv = document.getElementById('result');
  var editor = document.getElementById('editor');
  var answersDiv = document.getElementById('answers');
  var testsDiv = document.getElementById('tests');
  var errorBox = document.getElementById('error-box');
  var examjs = null;

  function update() {
    var source = editor.value;
    try {
      examjs = parser.parse(source);
      resultDiv.innerHTML = examjs.html;
      errorBox.innerHTML = '';
    } catch (e) {
      if (e) {
        errorBox.innerHTML = e;
      }
    }
    examjs.initQuestions();
  }

  editor.oninput = update;
  resultDiv.onchange = function(){
    var results = examjs.getResults();
    answersDiv.innerHTML = 'Answers: ' + results.rightAnswersCount;
    testsDiv.innerHTML = 'Tests: ' + results.questionsCount;
    console.log(results);
  }
  </script>
</body>

</html>
